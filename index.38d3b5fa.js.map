{"mappings":"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","sources":["src/index.js","src/js/gallery.js","src/js/refs/refs.js","src/js/render/renderCards.js","src/js/helpers/pagination.js"],"sourcesContent":["import './js/API/API';\nimport './js/gallery';\n","import {\n  fetchTrendingMovies,\n  fetchGenres,\n  fetchMovies,\n  fetchInfoMovieById,\n} from './API/API';\nimport { refs } from './refs/refs';\nimport {\n  renderCards,\n  insertMarkup,\n  IMAGES_URL,\n  ALT_IMAGE_URL,\n} from './render/renderCards';\nimport { pagination, paginationSelect } from './helpers/pagination';\n\nlet PAGE = 1;\n\nwindow.addEventListener('DOMContentLoaded', onLoad);\nrefs.pagination.addEventListener('click', paginationSelect);\nrefs.form.addEventListener('submit', onSearch);\n\nasync function onLoad() {\n  const response = await fetchTrendingMovies(PAGE);\n\n  pagination(response.data.page, response.data.total_pages);\n  insertMarkup(refs.mainContainer, await renderCards(response.data));\n\n  refs.mainContainer.addEventListener('click', showInfo);\n}\n\nasync function onSearch(e) {\n  e.preventDefault();\n\n  const {\n    target: { searchQuery },\n    currentTarget,\n  } = e;\n\n  const response = await fetchMovies(searchQuery.value);\n\n  if (\n    response.data.results === 0 ||\n    !response.data.results ||\n    response.data.results.length === 0\n  ) {\n    searchQuery.value = '';\n    refs.formAlert.classList.remove('visually-hidden');\n    setTimeout(() => {\n      refs.formAlert.classList.add('visually-hidden');\n    }, 3000);\n    return;\n  }\n\n  pagination(response.data.page, response.data.total_pages);\n  insertMarkup(refs.mainContainer, await renderCards(response.data));\n}\n\nasync function showInfo(e) {\n  e.preventDefault();\n\n  const { target, currentTarget } = e;\n\n  if (target === currentTarget) return;\n\n  const cardId = target.closest('li').getAttribute('data-id');\n\n  const el = {\n    img: refs.modalInfo.querySelector('.modal__img-wrapper img'),\n    originalTitle: refs.modalInfo.querySelector('.modal__title'),\n    ratio: refs.modalInfo.querySelector(\n      '.modal__ratio-info-list [data-value=\"ratio\"]'\n    ),\n    popularity: refs.modalInfo.querySelector(\n      '.modal__ratio-info-list [data-value=\"popularity\"]'\n    ),\n    refTitle: refs.modalInfo.querySelector(\n      '.modal__ratio-info-list [data-value=\"original-title\"]'\n    ),\n    genres: refs.modalInfo.querySelector(\n      '.modal__ratio-info-list [data-value=\"genre\"]'\n    ),\n    infoFilm: document.querySelector('.modal__full-info'),\n  };\n\n  if (!cardId) return;\n\n  const response = await fetchInfoMovieById(cardId);\n  if (response === undefined || response === null) {\n    return;\n  }\n\n  const {\n    title,\n    name,\n    vote_average,\n    vote_count,\n    popularity,\n    original_title,\n    original_name,\n    overview,\n    genres,\n    poster_path,\n  } = response.data;\n\n  el.img.src = IMAGES_URL + poster_path || ALT_IMAGE_URL;\n  el.originalTitle.textContent = title || name;\n  el.ratio.textContent = `${\n    vote_average ? vote_average.toFixed(1) : \"haven't ratio\"\n  }/${vote_count || ''}`;\n  el.popularity.textContent = popularity ? popularity.toFixed(1) : '';\n  el.refTitle.textContent = original_title || original_name;\n  el.genres.textContent = genres.map(el => el['name']).join(', ');\n  el.infoFilm.textContent = overview || \"haven't overview\";\n\n  refs.buttonCloseModal.addEventListener('click', toggleModal);\n  refs.backdrop.classList.remove('is-hidden');\n}\n\nfunction toggleModal(e) {\n  refs.backdrop.classList.add('is-hidden');\n  refs.buttonCloseModal.removeEventListener('click', toggleModal);\n}\n","const refs = {\n  mainContainer: document.querySelector('.movie-gallery'),\n  movieCard: document.getElementsByClassName('movie-card'),\n  pagination: document.querySelector('.pagination'),\n  form: document.querySelector('.form'),\n  formAlert: document.querySelector('.form__alert'),\n  modalInfo: document.querySelector('.modal'),\n  backdrop: document.querySelector('.backdrop'),\n  buttonCloseModal: document.querySelector('.button-close'),\n};\n\nexport { refs };\n","import { fetchGenres } from '../API/API';\n\nconst ALT_IMAGE_URL =\n  'https://www.csaff.org/wp-content/uploads/csaff-no-poster.jpg';\nconst IMAGES_URL = 'https://image.tmdb.org/t/p/w500/';\nlet imageUrl = '';\n\nasync function renderCards(data) {\n  try {\n    const response = await fetchGenres();\n    if (response.status !== 200) throw new Error(response.status);\n    if (response.data === undefined) {\n      throw new Error(response.data, 'undefined');\n    }\n\n    return data.results.reduce(\n      (\n        acc,\n        {\n          poster_path,\n          title,\n          genre_ids = \"haven't genres\",\n          vote_average,\n          name,\n          id,\n        }\n      ) => {\n        const genres = response.data.genres.reduce((acc, el) => {\n          if (genre_ids.includes(el['id'])) {\n            acc.push(el['name']);\n          }\n          return acc;\n        }, []);\n\n        if (\n          typeof poster_path === 'undefined' ||\n          typeof poster_path === 'object'\n        ) {\n          imageUrl = ALT_IMAGE_URL;\n        } else {\n          imageUrl = IMAGES_URL + poster_path;\n        }\n        acc += `<li class=\"movie-card\"  data-id='${id}'>\n  <img src='${imageUrl}' loading='lazy'/>\n  <h3 class=\"movie-card__name\">${title || name}</h3>\n  <p class=\"movie-card__genres\">\n    ${\n      genres.length === 0 ? \"haven't genre\" : genres.join(', ')\n    } <span class=\"movie-card__ratio\">${\n          vote_average ? vote_average.toFixed(1) : \"haven't ratio\"\n        }</span>\n  </p>\n</li>`;\n        return acc;\n      },\n      ''\n    );\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction insertMarkup(refOnContainer, markup) {\n  return (refOnContainer.innerHTML = markup);\n}\n\nexport { renderCards, insertMarkup, imageUrl, ALT_IMAGE_URL, IMAGES_URL };\n","import { refs } from '../refs/refs';\nimport { fetchTrendingMovies } from '../API/API';\nimport { renderCards, insertMarkup } from '../render/renderCards';\n\nfunction pagination(page, pages) {\n  let markup = '';\n  PAGE = page;\n  const beforeTwoPage = page - 2;\n  const beforeOnePage = page - 1;\n  const afterOnePage = page + 1;\n  const afterTwoPage = page + 2;\n  // &#129144;<\n  // &#129146;>\n  if (page > 1) {\n    markup += `<li data-action='prev'>&#129144;</li>`;\n    markup += `<li>1</li>`;\n  }\n  if (page > 4) {\n    markup += `<li>...</li>`;\n  }\n  if (page > 3) {\n    markup += `<li>${beforeTwoPage}</li>`;\n  }\n  if (page > 2) {\n    markup += `<li>${beforeOnePage}</li>`;\n  }\n  markup += `<li class='currentPage'>${PAGE}</li>`;\n  if (pages - 1 > PAGE) {\n    markup += `<li>${afterOnePage}</li>`;\n  }\n  if (pages - 2 > PAGE) {\n    markup += `<li>${afterTwoPage}</li>`;\n  }\n  if (pages - 3 > PAGE) {\n    markup += `<li>...</li>`;\n  }\n  if (pages > PAGE) {\n    markup += `<li>${pages}</li>`;\n    markup += `<li data-action='next'>&#129146;</li>`;\n  }\n  refs.pagination.innerHTML = markup;\n}\n\nasync function paginationSelect(e) {\n  const { target, currentTarget } = e;\n  if (target === currentTarget || target === '...') {\n    return;\n  }\n  if (target.dataset.action === 'next') {\n    PAGE += 1;\n    const response = await fetchTrendingMovies(PAGE);\n    insertMarkup(refs.mainContainer, await renderCards(response.data));\n    pagination(response.data.page, response.data.total_pages);\n    return;\n  }\n  if (target.dataset.action === 'prev') {\n    PAGE -= 1;\n    const response = await fetchTrendingMovies(PAGE);\n    insertMarkup(refs.mainContainer, await renderCards(response.data));\n    pagination(response.data.page, response.data.total_pages);\n    return;\n  }\n  PAGE = Number(target.textContent);\n  const response = await fetchTrendingMovies(PAGE);\n  insertMarkup(refs.mainContainer, await renderCards(response.data));\n  pagination(response.data.page, response.data.total_pages);\n}\n\nexport { pagination, paginationSelect };\n"],"names":["parcelRequire","$bpxeT","$90b98774a6cf815d$export$21666b427502ea6d","mainContainer","document","querySelector","movieCard","getElementsByClassName","pagination","form","formAlert","modalInfo","backdrop","buttonCloseModal","$860df6efc1aeb9bd$export$ff7a87772b8cc0e8","$860df6efc1aeb9bd$export$90e23c69cb027eb6","$860df6efc1aeb9bd$export$7a48f0b413eb10a2","$860df6efc1aeb9bd$export$e483d52d8d6686e1","data","$860df6efc1aeb9bd$var$_renderCards","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","response","$jqifL","fetchGenres","_ctx","sent","status","Error","undefined","results","reduce","acc1","param","poster_path","title","_genre_ids","genre_ids","vote_average","name","id","genres","acc","el","includes","push","concat","length","join","toFixed","console","log","t0","$860df6efc1aeb9bd$export$9393612adafb5496","refOnContainer","markup","innerHTML","$157176f387b406f5$export$22fa394f3ba39578","page","pages","PAGE","beforeOnePage","afterOnePage","afterTwoPage","$157176f387b406f5$var$_paginationSelect","e","target","currentTarget","response1","response2","dataset","action","fetchTrendingMovies","t1","t2","total_pages","t3","t4","t5","Number","textContent","t6","t7","t8","$6756f0db6f988caf$var$_onLoad","addEventListener","$6756f0db6f988caf$var$showInfo","$6756f0db6f988caf$var$_onSearch","searchQuery","preventDefault","fetchMovies","value","classList","remove","setTimeout","add","$6756f0db6f988caf$var$_showInfo","cardId","el1","_data","vote_count","popularity","original_title","original_name","overview","closest","getAttribute","img","originalTitle","ratio","refTitle","infoFilm","fetchInfoMovieById","src","map","$6756f0db6f988caf$var$toggleModal","removeEventListener","window"],"version":3,"file":"index.38d3b5fa.js.map"}