var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequired76b;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var o={id:e,exports:{}};return t[e]=o,n.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},e.parcelRequired76b=n),n("ed1K5");var o=n("ed1K5");const i={mainContainer:document.querySelector(".movie-gallery"),movieCard:document.getElementsByClassName("movie-card"),pagination:document.querySelector(".pagination"),form:document.querySelector(".form"),formAlert:document.querySelector(".form__alert"),modalInfo:document.querySelector(".modal"),backdrop:document.querySelector(".backdrop"),buttonCloseModal:document.querySelector(".button-close")};o=n("ed1K5");let r="";async function l(e){try{const t=await(0,o.fetchGenres)();if(200!==t.status)throw new Error(t.status);if(void 0===t.data)throw new Error(t.data,"undefined");return e.results.reduce(((e,{poster_path:a,title:n,genre_ids:o="haven't genres",vote_average:i,name:l,id:d})=>{const s=t.data.genres.reduce(((e,t)=>(o.includes(t.id)&&e.push(t.name),e)),[]);return r=void 0===a||"object"==typeof a?"https://www.csaff.org/wp-content/uploads/csaff-no-poster.jpg":"https://image.tmdb.org/t/p/w500/"+a,e+=`<li class="movie-card"  data-id='${d}'>\n  <img src='${r}' loading='lazy'/>\n  <h3 class="movie-card__name">${n||l}</h3>\n  <p class="movie-card__genres">\n    ${0===s.length?"haven't genre":s.join(", ")} <span class="movie-card__ratio">${i?i.toFixed(1):"haven't ratio"}</span>\n  </p>\n</li>`}),"")}catch(e){console.log(e)}}function d(e,t){return e.innerHTML=t}o=n("ed1K5");function s(e,t){let a="";PAGE=e;e>1&&(a+="<li data-action='prev'>&#129144;</li>",a+="<li>1</li>"),e>4&&(a+="<li>...</li>"),e>3&&(a+=`<li>${e-2}</li>`),e>2&&(a+=`<li>${e-1}</li>`),a+=`<li class='currentPage'>${PAGE}</li>`,t-1>PAGE&&(a+=`<li>${e+1}</li>`),t-2>PAGE&&(a+=`<li>${e+2}</li>`),t-3>PAGE&&(a+="<li>...</li>"),t>PAGE&&(a+=`<li>${t}</li>`,a+="<li data-action='next'>&#129146;</li>"),i.pagination.innerHTML=a}async function c(e){e.preventDefault();const{target:t,currentTarget:a}=e;if(t===a)return;const n=t.closest("li").getAttribute("data-id"),r={img:i.modalInfo.querySelector(".modal__img-wrapper img"),originalTitle:i.modalInfo.querySelector(".modal__title"),ratio:i.modalInfo.querySelector('.modal__ratio-info-list [data-value="ratio"]'),popularity:i.modalInfo.querySelector('.modal__ratio-info-list [data-value="popularity"]'),refTitle:i.modalInfo.querySelector('.modal__ratio-info-list [data-value="original-title"]'),genres:i.modalInfo.querySelector('.modal__ratio-info-list [data-value="genre"]'),infoFilm:document.querySelector(".modal__full-info")};if(!n)return;const l=await(0,o.fetchInfoMovieById)(n);if(null==l)return;const{title:d,name:s,vote_average:c,vote_count:f,popularity:m,original_title:p,original_name:g,overview:v,genres:w,poster_path:_}=l.data;r.img.src="https://image.tmdb.org/t/p/w500/"+_||"https://www.csaff.org/wp-content/uploads/csaff-no-poster.jpg",r.originalTitle.textContent=d||s,r.ratio.textContent=`${c?c.toFixed(1):"haven't ratio"}/${f||""}`,r.popularity.textContent=m?m.toFixed(1):"",r.refTitle.textContent=p||g,r.genres.textContent=w.map((e=>e.name)).join(", "),r.infoFilm.textContent=v||"haven't overview",i.buttonCloseModal.addEventListener("click",u),i.backdrop.classList.remove("is-hidden")}function u(e){i.backdrop.classList.add("is-hidden"),i.buttonCloseModal.removeEventListener("click",u)}window.addEventListener("DOMContentLoaded",(async function(){const e=await(0,o.fetchTrendingMovies)(1);s(e.data.page,e.data.total_pages),d(i.mainContainer,await l(e.data)),i.mainContainer.addEventListener("click",c)})),i.pagination.addEventListener("click",(async function(e){const{target:t,currentTarget:a}=e;if(t===a||"..."===t)return;if("next"===t.dataset.action){PAGE+=1;const e=await(0,o.fetchTrendingMovies)(PAGE);return d(i.mainContainer,await l(e.data)),void s(e.data.page,e.data.total_pages)}if("prev"===t.dataset.action){PAGE-=1;const e=await(0,o.fetchTrendingMovies)(PAGE);return d(i.mainContainer,await l(e.data)),void s(e.data.page,e.data.total_pages)}PAGE=Number(t.textContent);const n=await(0,o.fetchTrendingMovies)(PAGE);d(i.mainContainer,await l(n.data)),s(n.data.page,n.data.total_pages)})),i.form.addEventListener("submit",(async function(e){e.preventDefault();const{target:{searchQuery:t},currentTarget:a}=e,n=await(0,o.fetchMovies)(t.value);if(0===n.data.results||!n.data.results||0===n.data.results.length)return t.value="",i.formAlert.classList.remove("visually-hidden"),void setTimeout((()=>{i.formAlert.classList.add("visually-hidden")}),3e3);s(n.data.page,n.data.total_pages),d(i.mainContainer,await l(n.data))}));
//# sourceMappingURL=index.72920651.js.map
