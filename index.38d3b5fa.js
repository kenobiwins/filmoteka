!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired76b;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequired76b=r),r("jqifL");var o=r("bpxeT"),i=r("2TvXO"),c=r("jqifL"),s={mainContainer:document.querySelector(".movie-gallery"),movieCard:document.getElementsByClassName("movie-card"),pagination:document.querySelector(".pagination"),form:document.querySelector(".form"),formAlert:document.querySelector(".form__alert"),modalInfo:document.querySelector(".modal"),backdrop:document.querySelector(".backdrop"),buttonCloseModal:document.querySelector(".button-close")},l=(o=r("bpxeT"),i=r("2TvXO"),c=r("jqifL"),"https://www.csaff.org/wp-content/uploads/csaff-no-poster.jpg"),u="https://image.tmdb.org/t/p/w500/",d="";function p(e){return f.apply(this,arguments)}function f(){return(f=e(o)(e(i).mark((function t(n){var a;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.fetchGenres)();case 3:if(200===(a=e.sent).status){e.next=6;break}throw new Error(a.status);case 6:if(void 0!==a.data){e.next=8;break}throw new Error(a.data,"undefined");case 8:return e.abrupt("return",n.results.reduce((function(e,t){var n=t.poster_path,r=t.title,o=t.genre_ids,i=void 0===o?"haven't genres":o,c=t.vote_average,s=t.name,p=t.id,f=a.data.genres.reduce((function(e,t){return i.includes(t.id)&&e.push(t.name),e}),[]);return d=void 0===n||"object"==typeof n?l:u+n,e+='<li class="movie-card"  data-id=\''.concat(p,"'>\n  <img src='").concat(d,"' loading='lazy'/>\n  <h3 class=\"movie-card__name\">").concat(r||s,'</h3>\n  <p class="movie-card__genres">\n    ').concat(0===f.length?"haven't genre":f.join(", "),' <span class="movie-card__ratio">').concat(c?c.toFixed(1):"haven't ratio","</span>\n  </p>\n</li>")}),""));case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),t,null,[[0,11]])})))).apply(this,arguments)}function m(e,t){return e.innerHTML=t}o=r("bpxeT"),i=r("2TvXO"),c=r("jqifL");function v(e,t){var n="";PAGE=e;var a=e-1,r=e+1,o=e+2;e>1&&(n+="<li data-action='prev'>&#129144;</li>",n+="<li>1</li>"),e>4&&(n+="<li>...</li>"),e>3&&(n+="<li>".concat(e-2,"</li>")),e>2&&(n+="<li>".concat(a,"</li>")),n+="<li class='currentPage'>".concat(PAGE,"</li>"),t-1>PAGE&&(n+="<li>".concat(r,"</li>")),t-2>PAGE&&(n+="<li>".concat(o,"</li>")),t-3>PAGE&&(n+="<li>...</li>"),t>PAGE&&(n+="<li>".concat(t,"</li>"),n+="<li data-action='next'>&#129146;</li>"),s.pagination.innerHTML=n}function g(){return(g=e(o)(e(i).mark((function t(n){var a,r,o,l,u;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.target,r=n.currentTarget,a!==r&&"..."!==a){e.next=3;break}return e.abrupt("return");case 3:if("next"!==a.dataset.action){e.next=16;break}return PAGE+=1,e.next=7,(0,c.fetchTrendingMovies)(PAGE);case 7:return o=e.sent,e.t0=m,e.t1=s.mainContainer,e.next=12,p(o.data);case 12:return e.t2=e.sent,(0,e.t0)(e.t1,e.t2),v(o.data.page,o.data.total_pages),e.abrupt("return");case 16:if("prev"!==a.dataset.action){e.next=29;break}return PAGE-=1,e.next=20,(0,c.fetchTrendingMovies)(PAGE);case 20:return l=e.sent,e.t3=m,e.t4=s.mainContainer,e.next=25,p(l.data);case 25:return e.t5=e.sent,(0,e.t3)(e.t4,e.t5),v(l.data.page,l.data.total_pages),e.abrupt("return");case 29:return PAGE=Number(a.textContent),e.next=32,(0,c.fetchTrendingMovies)(PAGE);case 32:return u=e.sent,e.t6=m,e.t7=s.mainContainer,e.next=37,p(u.data);case 37:e.t8=e.sent,(0,e.t6)(e.t7,e.t8),v(u.data.page,u.data.total_pages);case 40:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function h(){return(h=e(o)(e(i).mark((function t(){var n;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.fetchTrendingMovies)(1);case 2:return v((n=e.sent).data.page,n.data.total_pages),e.t0=m,e.t1=s.mainContainer,e.next=8,p(n.data);case 8:e.t2=e.sent,(0,e.t0)(e.t1,e.t2),s.mainContainer.addEventListener("click",y);case 11:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function x(){return(x=e(o)(e(i).mark((function t(n){var a,r;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=n.target.searchQuery,n.currentTarget,e.next=4,(0,c.fetchMovies)(a.value);case 4:if(0!==(r=e.sent).data.results&&r.data.results&&0!==r.data.results.length){e.next=10;break}return a.value="",s.formAlert.classList.remove("visually-hidden"),setTimeout((function(){s.formAlert.classList.add("visually-hidden")}),3e3),e.abrupt("return");case 10:return v(r.data.page,r.data.total_pages),e.t0=m,e.t1=s.mainContainer,e.next=15,p(r.data);case 15:e.t2=e.sent,(0,e.t0)(e.t1,e.t2);case 17:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return(b=e(o)(e(i).mark((function t(n){var a,r,o,d,p,f,m,v,g,h,x,y,b,w,E,T;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a=n.target,r=n.currentTarget,a!==r){e.next=4;break}return e.abrupt("return");case 4:if(o=a.closest("li").getAttribute("data-id"),d={img:s.modalInfo.querySelector(".modal__img-wrapper img"),originalTitle:s.modalInfo.querySelector(".modal__title"),ratio:s.modalInfo.querySelector('.modal__ratio-info-list [data-value="ratio"]'),popularity:s.modalInfo.querySelector('.modal__ratio-info-list [data-value="popularity"]'),refTitle:s.modalInfo.querySelector('.modal__ratio-info-list [data-value="original-title"]'),genres:s.modalInfo.querySelector('.modal__ratio-info-list [data-value="genre"]'),infoFilm:document.querySelector(".modal__full-info")},o){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,(0,c.fetchInfoMovieById)(o);case 10:if(null!=(p=e.sent)){e.next=13;break}return e.abrupt("return");case 13:f=p.data,m=f.title,v=f.name,g=f.vote_average,h=f.vote_count,x=f.popularity,y=f.original_title,b=f.original_name,w=f.overview,E=f.genres,T=f.poster_path,d.img.src=u+T||l,d.originalTitle.textContent=m||v,d.ratio.textContent="".concat(g?g.toFixed(1):"haven't ratio","/").concat(h||""),d.popularity.textContent=x?x.toFixed(1):"",d.refTitle.textContent=y||b,d.genres.textContent=E.map((function(e){return e.name})).join(", "),d.infoFilm.textContent=w||"haven't overview",s.buttonCloseModal.addEventListener("click",_),s.backdrop.classList.remove("is-hidden");case 23:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function _(e){s.backdrop.classList.add("is-hidden"),s.buttonCloseModal.removeEventListener("click",_)}window.addEventListener("DOMContentLoaded",(function(){return h.apply(this,arguments)})),s.pagination.addEventListener("click",(function(e){return g.apply(this,arguments)})),s.form.addEventListener("submit",(function(e){return x.apply(this,arguments)}))}();
//# sourceMappingURL=index.38d3b5fa.js.map
